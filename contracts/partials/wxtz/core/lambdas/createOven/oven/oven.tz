{ PUSH (lambda (pair (pair (pair string bytes) mutez) address) operation) { DUP ; CDR ; CONTRACT %runEntrypointLambda (pair (string %lambdaName) (bytes %lambdaParameter)) ; IF_NONE { PUSH string "6" ; FAILWITH } {} ; SWAP ; DUP ; DUG 2 ; CAR ; CDR ; DIG 2 ; CAR ; CAR ; TRANSFER_TOKENS } ; PAIR ; { DUP ; CDR ; SWAP ; CAR ; SWAP ; DUP ; CDR ; SWAP ; CAR ; IF_LEFT { IF_LEFT { DROP ; DUP ; SENDER ; COMPARE ; EQ ; IF { SWAP ; DROP ; NIL operation ; PAIR } { DUP ; AMOUNT ; PUSH unit Unit ; PACK ; PUSH string "onOvenDepositReceived" ; PAIR ; PAIR ; PAIR ; DIG 2 ; SWAP ; EXEC ; SWAP ; NIL operation ; DIG 2 ; CONS ; PAIR } } { PAIR ; DUP ; CDR ; DUP ; AMOUNT ; PUSH unit Unit ; PACK ; PUSH string "onOvenSetDelegate" ; PAIR ; PAIR ; PAIR ; DIG 3 ; SWAP ; EXEC ; DIG 2 ; CAR ; SET_DELEGATE ; DIG 2 ; NIL operation ; DIG 2 ; CONS ; DIG 2 ; CONS ; PAIR } } { SWAP ; DUP ; AMOUNT ; DIG 3 ; DUP ; DUG 4 ; PACK ; PUSH string "onOvenWithdrawalRequested" ; PAIR ; PAIR ; PAIR ; DIG 3 ; SWAP ; EXEC ; SENDER ; CONTRACT unit ; IF_NONE { PUSH string "14" ; FAILWITH } {} ; PUSH mutez 1 ; DIG 4 ; MUL ; PUSH unit Unit ; TRANSFER_TOKENS ; DIG 2 ; NIL operation ; DIG 2 ; CONS ; DIG 2 ; CONS ; PAIR } } }